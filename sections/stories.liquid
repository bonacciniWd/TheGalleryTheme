{% schema %}
{
  "name": "Stories Custom",
  "tag": "section",
  "class": "section-stories",
  "settings": [],
  "presets": [
    {
      "name": "Stories"
    }
  ]
}
{% endschema %}

<div class="custom-stories-carousel">
  {% assign stories = shop.metafields.custom.stories.value %}
  {% if stories and stories.size > 0 %}
    <div class="stories-wrapper">
      {% for story in stories %}
        <a href="{{ story.link }}" class="story-item" data-index="{{ forloop.index0 }}" data-duration="{{ story.duration | default: 5000 }}">
          {% if story.image_url contains '.mp4' %}
            <video src="{{ story.image_url }}" muted playsinline></video>
          {% else %}
            <img width="80" height="80" src="{{ story.image_url }}" alt="{{ story.title | escape }}" loading="lazy">
          {% endif %}
          <span class="story-title">{{ story.title }}</span>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p class="no-stories">Nenhum story dispon√≠vel no momento.</p>
  {% endif %}
</div>

{{ 'stories.css' | asset_url | stylesheet_tag }}
{{ 'stories.js' | asset_url | script_tag }}
