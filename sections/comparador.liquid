{% comment %}
  Seção de Comparação de Imagens com Slider de Fundo
  Baseado no código fornecido, utilizando background-image e um input type="range".
  Estilos dinâmicos permanecem aqui. Estilos estáticos em assets/global.css.
  JavaScript em assets/config.js.
{% endcomment %}

<style>
  /* Estilos dinâmicos para a seção principal (dependem das configurações do schema) */
  .section-image-comparison-background-slider-{{ section.id }} {
    max-width: {{ section.settings.max_width }}px;
    background-color: {{ section.settings.background_color }};
  }

  /* Título da seção (opcional) */
  .image-comparison-background-slider-heading-{{ section.id }} {
    color: {{ section.settings.text_color }};
  }

  /* Container principal da comparação */
  #comparison-{{ section.id }} {
    padding-top: {{ 100 | divided_by: section.settings.aspect_ratio }}%;
    max-width: {{ section.settings.max_width }}px;
  }

  /* Figure - Imagem 'Antes' (fica como background-image) */
  #comparison-{{ section.id }} figure {
    background-image: url("{% if section.settings.image_before != blank %}{{ section.settings.image_before | img_url: 'master' }}{% else %}https://placehold.co/1200x900/E0E0E0/333333?text=ANTES{% endif %}");
  }

  /* Divisor - Imagem 'Depois' (fica como background-image dentro do divisor) */
  #divisor-{{ section.id }} {
    background-image: url("{% if section.settings.image_after != blank %}{{ section.settings.image_after | img_url: 'master' }}{% else %}https://placehold.co/1200x900/A0A0A0/FFFFFF?text=DEPOIS{% endif %}");
  }

  /* Estilos específicos para o thumb (handle) do slider */
  #slider-{{ section.id }}::-webkit-slider-thumb {
    background: {{ section.settings.slider_handle_color }};
    border: 2px solid {{ section.settings.slider_line_color }};
  }

  #slider-{{ section.id }}::-moz-range-thumb {
    background: {{ section.settings.slider_handle_color }};
    border: 2px solid {{ section.settings.slider_line_color }};
  }
</style>

<section class="section-image-comparison-background-slider-{{ section.id }} comparison-section">
  {% if section.settings.heading != blank %}
    <h2 class="image-comparison-background-slider-heading-{{ section.id }}">{{ section.settings.heading }}</h2>
  {% endif %}

  <div id="comparison-{{ section.id }}" class="comparison-container">
    <figure class="comparison-figure">
      <div id="divisor-{{ section.id }}" class="comparison-divisor"></div>
    </figure>
    <input type="range" min="0" max="100" value="{{ section.settings.initial_slider_position }}" id="slider-{{ section.id }}" class="comparison-slider" aria-label="Slider de comparação de imagens">
  </div>
</section>

{% schema %}
{
  "name": "Comparação de Imagens",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Título da Seção",
      "default": "Veja a Diferença!"
    },
    {
      "type": "image_picker",
      "id": "image_before",
      "label": "Imagem 'Antes'",
      "info": "A imagem que ficará no fundo."
    },
    {
      "type": "image_picker",
      "id": "image_after",
      "label": "Imagem 'Depois'",
      "info": "A imagem que será revelada pelo slider."
    },
    {
      "type": "range",
      "id": "initial_slider_position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "Posição Inicial do Slider",
      "default": 50,
      "info": "Define a posição inicial do slider em porcentagem."
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 300,
      "max": 1600,
      "step": 50,
      "unit": "px",
      "label": "Largura Máxima do Slider",
      "default": 900,
      "info": "Largura máxima do container de comparação de imagens."
    },
    {
      "type": "range",
      "id": "aspect_ratio",
      "min": 0.5,
      "max": 2.0,
      "step": 0.1,
      "label": "Proporção da Imagem (Largura/Altura)",
      "default": 1.3,
      "info": "Define a proporção do container (Largura / Altura, ex: 1.3 para 4:3, 1.77 para 16:9). Ajuste para a proporção das suas imagens para evitar distorção."
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Cor de Fundo da Seção",
      "default": "#f5f5f7"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Cor do Título da Seção",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "slider_line_color",
      "label": "Cor da Linha do Slider (Borda do Handle)",
      "default": "#007aff"
    },
    {
      "type": "color",
      "id": "slider_handle_color",
      "label": "Cor do Handle do Slider",
      "default": "#007aff"
    }
  ],
  "presets": [
    {
      "name": "Comparação de Imagens (Slider de Fundo)",
      "category": "Imagens e Vídeos"
    }
  ]
}
{% endschema %}
